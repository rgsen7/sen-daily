{{ define "main" }}
<div class="mb-6">
  <h1 class="text-xl font-semibold tracking-tight" style="color: var(--fg);">{{ .Title }}</h1>
  {{ with .Description }}
  <p class="text-xs font-mono mt-1" style="color: var(--fg-muted);">{{ . }}</p>
  {{ end }}
</div>

{{ $pages := .Pages }}
{{ if .IsHome }}{{ $pages = where site.RegularPages "Section" "posts" }}{{ end }}

{{ range $pages.GroupByDate "2006-01" }}
<div class="mb-8">
  <h2 class="text-xs font-mono font-medium uppercase tracking-widest mb-3 flex items-center gap-2" style="color: var(--fg-muted);">
    {{ .Key }} <span class="opacity-50">({{ len .Pages }})</span>
  </h2>
  <div class="card divide-y" style="border-color: var(--border);">
    {{ range .Pages }}
    <a href="{{ .Permalink }}" class="flex items-center justify-between gap-3 px-4 py-2.5 group">
      <div class="min-w-0 flex-1 flex items-center gap-3">
        <span class="text-sm font-medium truncate group-hover:text-primary transition-colors" style="color: var(--fg);">{{ .Title }}</span>
        {{ with .Params.tags }}
        <div class="hidden sm:flex gap-1 shrink-0">
          {{ range first 3 . }}
          <span class="bg-tag text-xs font-mono px-1 py-0.5 rounded">{{ . }}</span>
          {{ end }}
        </div>
        {{ end }}
      </div>
      <time class="text-xs font-mono shrink-0" style="color: var(--fg-muted);" datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "01-02" }}</time>
    </a>
    {{ end }}
  </div>
</div>
{{ end }}

{{ template "_internal/pagination.html" . }}
{{ end }}
