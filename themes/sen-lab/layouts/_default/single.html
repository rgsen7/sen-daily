{{ define "main" }}
<article class="max-w-article mx-auto">
  {{/* Header */}}
  <header class="mb-8 pb-6 border-b dark:border-border border-gray-200">
    <time class="text-xs font-mono dark:text-fg-muted text-gray-400 tabular-nums">
      {{ .Date.Format "2006-01-02" }}
    </time>
    <h1 class="mt-2 text-xl font-semibold dark:text-fg text-fg-light tracking-tight leading-snug">
      {{ .Title }}
    </h1>
    {{ with .Params.summary }}
    <p class="mt-3 text-sm dark:text-fg-muted text-gray-500 leading-relaxed">{{ . }}</p>
    {{ end }}
    {{ with .Params.tags }}
    <div class="mt-4 flex flex-wrap gap-1.5">
      {{ range . }}
      <a href="{{ "tags/" | absURL }}{{ . | urlize }}/" 
         class="text-[10px] font-mono dark:text-fg-muted text-gray-400 dark:bg-white/[0.04] bg-gray-100 px-2 py-0.5 rounded hover:text-accent transition-colors">
        {{ . }}
      </a>
      {{ end }}
    </div>
    {{ end }}
  </header>

  {{/* Content */}}
  <div class="article-content dark:text-fg-muted text-gray-600 text-[15px]">
    {{ .Content }}
  </div>

  {{/* Nav */}}
  <nav class="mt-12 pt-6 border-t dark:border-border border-gray-200 flex justify-between text-xs font-mono">
    {{ with .PrevInSection }}
    <a href="{{ .Permalink }}" class="dark:text-fg-muted text-gray-400 hover:text-accent transition-colors">← {{ .Title | truncate 40 }}</a>
    {{ else }}<span></span>{{ end }}
    {{ with .NextInSection }}
    <a href="{{ .Permalink }}" class="dark:text-fg-muted text-gray-400 hover:text-accent transition-colors">{{ .Title | truncate 40 }} →</a>
    {{ else }}<span></span>{{ end }}
  </nav>

  {{/* Comments */}}
  {{ partial "comments.html" . }}
</article>
{{ end }}
