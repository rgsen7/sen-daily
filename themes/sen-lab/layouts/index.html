{{ define "main" }}
{{/* Hero */}}
<section class="mb-12">
  <h1 class="text-3xl font-semibold tracking-tight" style="color: var(--fg);">
    {{ .Site.Title }}
  </h1>
  <p class="text-sm mt-2 max-w-lg" style="color: var(--fg-muted);">
    {{ .Site.Params.description }}
  </p>
</section>

{{/* Latest posts */}}
{{ $posts := where site.RegularPages "Section" "posts" }}
{{ $latest := first 1 $posts }}
{{ $rest := after 1 $posts }}

{{/* Featured latest */}}
{{ range $latest }}
<section class="mb-10">
  <a href="{{ .Permalink }}" class="card block px-6 py-5 group" style="border-color: var(--primary);">
    <div class="flex items-center gap-2 mb-2">
      <span class="inline-block w-1.5 h-1.5 rounded-full" style="background: var(--primary);"></span>
      <span class="text-xs font-mono uppercase tracking-widest" style="color: var(--primary);">最新</span>
      <time class="text-xs font-mono ml-auto" style="color: var(--fg-muted);" datetime="{{ .Date.Format "2006-01-02" }}">
        {{ .Date.Format "2006-01-02" }}
      </time>
    </div>
    <h2 class="text-lg font-semibold group-hover:text-primary transition-colors" style="color: var(--fg);">
      {{ .Title }}
    </h2>
    {{ with .Description }}
    <p class="text-sm mt-2 line-clamp-3" style="color: var(--fg-muted);">{{ . }}</p>
    {{ end }}
    {{ with .Params.tags }}
    <div class="flex flex-wrap gap-1.5 mt-3">
      {{ range first 5 . }}
      <span class="bg-tag text-xs font-mono px-1.5 py-0.5 rounded">{{ . }}</span>
      {{ end }}
    </div>
    {{ end }}
  </a>
</section>
{{ end }}

{{/* Archive list */}}
{{ if $rest }}
<section>
  <h2 class="text-xs font-mono font-medium uppercase tracking-widest mb-4" style="color: var(--fg-muted);">
    往期日报
  </h2>
  <div class="space-y-2">
    {{ range $rest }}
    <a href="{{ .Permalink }}" class="card block px-5 py-3 group">
      <div class="flex items-center justify-between gap-4">
        <h3 class="text-sm font-medium truncate group-hover:text-primary transition-colors" style="color: var(--fg);">
          {{ .Title }}
        </h3>
        <time class="text-xs font-mono shrink-0" style="color: var(--fg-muted);" datetime="{{ .Date.Format "2006-01-02" }}">
          {{ .Date.Format "01-02" }}
        </time>
      </div>
    </a>
    {{ end }}
  </div>
</section>
{{ end }}
{{ end }}
